# Redis configuration for Engram memory system
# Optimized for AI agent memory operations and vector search

# Memory and persistence settings
save 900 1
save 300 10
save 60 10000
appendonly yes
appendfsync everysec

# Memory management
maxmemory 512mb
maxmemory-policy allkeys-lru

# Network settings
bind 0.0.0.0
port 6379
tcp-keepalive 300

# Logging
loglevel notice
logfile ""

# Security (basic settings)
protected-mode no

# Performance tuning for agent operations
hash-max-ziplist-entries 512
hash-max-ziplist-value 64
list-max-ziplist-size -2
list-compress-depth 0
set-max-intset-entries 512
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

# Client settings
timeout 0
tcp-keepalive 300

# RediSearch/Vector search optimization
loadmodule /opt/redis-stack/lib/redisearch.so
loadmodule /opt/redis-stack/lib/redisai.so
loadmodule /opt/redis-stack/lib/redistimeseries.so
loadmodule /opt/redis-stack/lib/rejson.so
loadmodule /opt/redis-stack/lib/redisbloom.so
loadmodule /opt/redis-stack/lib/redisgears.so